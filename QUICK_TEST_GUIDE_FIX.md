# å®¢æˆ¶æ¸…å–® API ä¿®å¾© - å¿«é€Ÿæ¸¬è©¦æŒ‡å—

> **ä¿®å¾©æ—¥æœŸ**ï¼š2026-01-02  
> **å•é¡Œ**ï¼šç®¡ç†å“¡ç„¡æ³•æŸ¥çœ‹ã€Œé¸æ“‡å½±ç‰‡ã€åˆ†é 

---

## ğŸš€ éƒ¨ç½²æ­¥é©Ÿ

### 1. é‡å•Ÿå¾Œç«¯ï¼ˆå¿…é ˆï¼‰

```bash
# é€²å…¥å¾Œç«¯ç›®éŒ„
cd backend

# é‡å•Ÿé–‹ç™¼æœå‹™å™¨
npm run dev
```

### 2. é‡æ–°å»ºç½®å‰ç«¯ï¼ˆå¿…é ˆï¼‰

```bash
# é€²å…¥å‰ç«¯ç›®éŒ„
cd frontend

# æ¸…é™¤èˆŠçš„å»ºç½®æª”æ¡ˆ
rm -rf dist

# é‡æ–°å»ºç½®
npm run build

# æˆ–è€…å•Ÿå‹•é–‹ç™¼æ¨¡å¼
npm run dev
```

---

## âœ… æ¸¬è©¦æª¢æŸ¥æ¸…å–®

### æ¸¬è©¦ 1ï¼šç®¡ç†å“¡ç™»å…¥

- [ ] ä½¿ç”¨ç®¡ç†å“¡å¸³è™Ÿç™»å…¥ç³»çµ±
- [ ] é»æ“Šã€Œé¸æ“‡å½±ç‰‡ã€åˆ†é 
- [ ] âœ… æª¢æŸ¥ï¼šé é¢æ­£å¸¸é¡¯ç¤ºï¼Œç„¡éŒ¯èª¤è¨Šæ¯
- [ ] âœ… æª¢æŸ¥ï¼šF12 æ§åˆ¶å°ç„¡ `Cannot read properties of undefined` éŒ¯èª¤
- [ ] âœ… æª¢æŸ¥ï¼šå¯ä»¥çœ‹åˆ°ã€Œæˆ‘çš„æ¸…å–®ã€é¡¯ç¤ºå½±ç‰‡æ•¸é‡

### æ¸¬è©¦ 2ï¼šå®¢æˆ¶ç™»å…¥

- [ ] ä½¿ç”¨å®¢æˆ¶å¸³è™Ÿç™»å…¥ç³»çµ±
- [ ] é€²å…¥ã€Œé¸æ“‡å½±ç‰‡ã€é é¢
- [ ] âœ… æª¢æŸ¥ï¼šå¯ä»¥çœ‹åˆ°å½±ç‰‡æ¸…å–®
- [ ] âœ… æª¢æŸ¥ï¼šã€Œæˆ‘çš„æ¸…å–®ã€é¡¯ç¤ºæ­£ç¢ºçš„å½±ç‰‡æ•¸é‡
- [ ] âœ… æª¢æŸ¥ï¼šå¯ä»¥é¸æ“‡/å–æ¶ˆé¸æ“‡å½±ç‰‡

### æ¸¬è©¦ 3ï¼šå½±ç‰‡é¸æ“‡åŠŸèƒ½

- [ ] é¸æ“‡å¹¾éƒ¨å½±ç‰‡
- [ ] âœ… æª¢æŸ¥ï¼šã€Œå¾…è™•ç†è®Šæ›´ã€å€å¡Šæ­£ç¢ºé¡¯ç¤ºæ–°å¢æ•¸é‡
- [ ] é»æ“Šã€Œæäº¤è®Šæ›´ã€
- [ ] âœ… æª¢æŸ¥ï¼šç¢ºèªè¦–çª—æ­£ç¢ºé¡¯ç¤ºè®Šæ›´æ‘˜è¦
- [ ] ç¢ºèªæäº¤
- [ ] âœ… æª¢æŸ¥ï¼šæäº¤æˆåŠŸï¼Œæ¸…å–®æ›´æ–°
- [ ] âœ… æª¢æŸ¥ï¼šæ”¶åˆ°éƒµä»¶é€šçŸ¥

### æ¸¬è©¦ 4ï¼šç©ºæ¸…å–®æƒ…æ³

- [ ] ä½¿ç”¨ä¸€å€‹æ²’æœ‰é¸æ“‡éå½±ç‰‡çš„æ–°å®¢æˆ¶å¸³è™Ÿç™»å…¥
- [ ] âœ… æª¢æŸ¥ï¼šã€Œæˆ‘çš„æ¸…å–®ã€é¡¯ç¤ºã€Œæ‚¨å°šæœªé¸æ“‡ä»»ä½•å½±ç‰‡ã€
- [ ] âœ… æª¢æŸ¥ï¼šç„¡éŒ¯èª¤è¨Šæ¯

---

## ğŸ” é™¤éŒ¯æŠ€å·§

### æŸ¥çœ‹ F12 æ§åˆ¶å°æ—¥èªŒ

1. æŒ‰ `F12` æ‰“é–‹é–‹ç™¼è€…å·¥å…·
2. åˆ‡æ›åˆ°ã€ŒConsoleã€æ¨™ç±¤
3. æŸ¥çœ‹æ˜¯å¦æœ‰ä»¥ä¸‹è¨Šæ¯ï¼š

**âœ… æ­£ç¢ºçš„æ—¥èªŒ**ï¼š
```
ğŸ” è¼‰å…¥å®¢æˆ¶æ¸…å–®...
âœ… å·²è¼‰å…¥ X éƒ¨å½±ç‰‡
```

**âŒ éŒ¯èª¤çš„æ—¥èªŒ**ï¼š
```
âŒ è¼‰å…¥å®¢æˆ¶æ¸…å–®å¤±æ•—: TypeError: Cannot read properties of undefined (reading 'length')
```

### æŸ¥çœ‹ç¶²è·¯è«‹æ±‚

1. åœ¨ F12 ä¸­åˆ‡æ›åˆ°ã€ŒNetworkã€æ¨™ç±¤
2. åˆ·æ–°é é¢
3. æ‰¾åˆ° `customer-list` è«‹æ±‚
4. é»æ“ŠæŸ¥çœ‹ã€ŒResponseã€

**âœ… æ­£ç¢ºçš„éŸ¿æ‡‰æ ¼å¼**ï¼š
```json
{
  "success": true,
  "data": {
    "items": [
      { "id": "...", "title": "...", ... }
    ],
    "videoIds": ["uuid-1", "uuid-2"]
  },
  "count": 2
}
```

**âŒ éŒ¯èª¤çš„æ ¼å¼ï¼ˆèˆŠæ ¼å¼ï¼‰**ï¼š
```json
{
  "success": true,
  "data": [
    { "id": "...", "title": "...", ... }
  ],
  "count": 2
}
```

---

## ğŸ› å¦‚æœé‚„æ˜¯æœ‰å•é¡Œ

### æª¢æŸ¥ 1ï¼šç¢ºèªå¾Œç«¯ä»£ç¢¼å·²æ›´æ–°

```bash
cd backend/src/routes
grep -A 5 "videoIds = formattedList" customerList.js
```

æ‡‰è©²çœ‹åˆ°ï¼š
```javascript
const videoIds = formattedList.map(item => item.id);

res.json({
  success: true,
  data: {
    items: formattedList,
    videoIds: videoIds
  },
```

### æª¢æŸ¥ 2ï¼šç¢ºèªå‰ç«¯ä»£ç¢¼å·²æ›´æ–°

```bash
cd frontend/src/lib
grep -A 3 "items: \[\]" api.js
```

æ‡‰è©²çœ‹åˆ°ï¼š
```javascript
data: {
  items: [],
  videoIds: []
},
```

### æª¢æŸ¥ 3ï¼šæ¸…é™¤ç€è¦½å™¨å¿«å–

1. æŒ‰ `Ctrl + Shift + Delete`ï¼ˆWindowsï¼‰æˆ– `Cmd + Shift + Delete`ï¼ˆMacï¼‰
2. å‹¾é¸ã€Œå¿«å–çš„åœ–ç‰‡å’Œæª”æ¡ˆã€
3. é»æ“Šã€Œæ¸…é™¤è³‡æ–™ã€
4. é‡æ–°æ•´ç†é é¢ï¼ˆ`Ctrl + F5` æˆ– `Cmd + Shift + R`ï¼‰

### æª¢æŸ¥ 4ï¼šé‡æ–°ç™»å…¥

1. ç™»å‡ºç³»çµ±
2. æ¸…é™¤ç€è¦½å™¨ Local Storageï¼š
   - F12 â†’ Application â†’ Local Storage â†’ å³éµ â†’ Clear
3. é‡æ–°ç™»å…¥

---

## ğŸ“ éœ€è¦å¹«åŠ©ï¼Ÿ

å¦‚æœæ¸¬è©¦å¾Œä»æœ‰å•é¡Œï¼Œè«‹æä¾›ä»¥ä¸‹è³‡è¨Šï¼š

1. ä½¿ç”¨çš„ç€è¦½å™¨ç‰ˆæœ¬
2. F12 æ§åˆ¶å°çš„å®Œæ•´éŒ¯èª¤è¨Šæ¯
3. Network æ¨™ç±¤ä¸­ `customer-list` API çš„å®Œæ•´éŸ¿æ‡‰
4. ä½¿ç”¨çš„æ˜¯ç®¡ç†å“¡ã€ä¸Šå‚³è€…é‚„æ˜¯å®¢æˆ¶å¸³è™Ÿ

---

**ä¿®å¾©æª”æ¡ˆ**ï¼š
- âœï¸ `backend/src/routes/customerList.js`
- âœï¸ `frontend/src/lib/api.js`
- âœï¸ `frontend/src/pages/MovieSelection.jsx`

**è©³ç´°æ–‡æª”**ï¼šè«‹åƒé–± `FIX_CUSTOMER_LIST_API_FORMAT.md`
