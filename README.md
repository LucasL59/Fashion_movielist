# æ¯æœˆå½±ç‰‡é¸æ“‡ç³»çµ± (Monthly Movie Selection System)

> **ç‰ˆæœ¬**ï¼šv3.0.3 ï½œ **æœ€å¾Œæ›´æ–°**ï¼š2026-01-03 ï½œ **ç‹€æ…‹**ï¼šâœ… å¯éƒ¨ç½²ã€å¯æ¸¬è©¦

## ğŸ”° å°ˆæ¡ˆç°¡ä»‹

MVI Select æ˜¯ä¸€å¥— React + Node.js + Supabase æ‰“é€ çš„ã€Œæ¯æœˆå½±ç‰‡é¸æ“‡ã€å¹³å°ã€‚ç®¡ç†å“¡å¯ä¸Šå‚³å«åœ–ç‰‡çš„ Excel ç‰‡å–®ã€è¨­å®šæé†’èˆ‡æ“ä½œç´€éŒ„ï¼›ä¸Šå‚³è€…å°ˆæ³¨æ–¼æ›´æ–°ç‰‡å–®ï¼›å®¢æˆ¶å‰‡èƒ½ç·šä¸Šé¸ç‰‡ä¸¦å³æ™‚é€šçŸ¥ç›¸é—œäººå“¡ã€‚

## âš™ï¸ æŠ€è¡“æ¶æ§‹

| å±¤ç´š | æŠ€è¡“ | èªªæ˜ |
|------|------|------|
| å‰ç«¯ | React 18 + Vite + Tailwind CSS + Shadcn UI | æä¾› Apple é¢¨æ ¼ UIã€BrandTransition å‹•ç•«èˆ‡ Context-based æ¬Šé™æ§ç®¡ |
| å¾Œç«¯ | Node.js + Express | æ•´åˆ Supabaseã€Microsoft Graphã€æ’ç¨‹ cron |
| è³‡æ–™åº« | Supabase (PostgreSQL) + Supabase Storage | RLS æ¬Šé™ã€operation_logsã€system_settingsã€å½±ç‰‡/æ‰¹æ¬¡/é¸æ“‡è³‡æ–™ |
| èªè­‰ | Supabase Auth | æ”¯æ´ email/passwordã€ç®¡ç†å“¡ç¨½æ ¸æ“ä½œ |
| Email | Microsoft Graph API | å®¢æˆ¶æäº¤é¸ç‰‡ã€æ‰¹æ¬¡ä¸Šå‚³ã€æé†’é€šçŸ¥ |

## ğŸŒŸ æ ¸å¿ƒåŠŸèƒ½

### ä¸‰å±¤æ¬Šé™

| è§’è‰² | æ ¸å¿ƒèƒ½åŠ› |
|------|----------|
| **Admin** | ä¸Šå‚³/åˆªé™¤æ‰¹æ¬¡ã€ç®¡ç†ç”¨æˆ¶ã€è¨­å®šæé†’ã€æŸ¥çœ‹æ“ä½œç´€éŒ„ |
| **Uploader** | ä¸Šå‚³/ç·¨è¼¯å½±ç‰‡ã€æŸ¥çœ‹é¸ç‰‡ç‹€æ…‹ |
| **Customer** | ç€è¦½ç‰‡å–®ã€é¸ç‰‡ã€æäº¤æ¸…å–® |

### è‡ªå‹•åŒ– / é€²éšåŠŸèƒ½

- Excel åœ–ç‰‡è§£æ + Supabase Storage å„²å­˜
- æª”æ¡ˆåç¨±æœˆä»½è­˜åˆ¥ + æœˆä»½é¸æ“‡å™¨ï¼ˆè‡ªå‹•è§£æ `YYYY-MM / 11æœˆ / 202411` ç­‰æ ¼å¼ä¸¦æä¾›æœˆä»½åˆ‡æ›ï¼‰
- æ¯æœˆæé†’è¨­å®šï¼ˆUI è‡ªå‹•åŒæ­¥ã€é è¨­é€šçŸ¥ä¸Šå‚³è€… + è‡ªè¨‚ Emailï¼‰
- PostgREST + cron æ’ç¨‹å¯„é€æé†’ï¼Œä»¥åŠè£œç™¼é€šçŸ¥ API
- Operation Logsï¼šè¨˜éŒ„ç™»å…¥/ç™»å‡ºã€è§’è‰²è®Šæ›´ã€éƒµä»¶è¨­å®šç­‰ï¼Œä¸¦å…·ä¿ç•™å¤©æ•¸è‡ªå‹•æ¸…ç†
- æ“ä½œæ­·å² / é¸æ“‡æ­·å²ï¼šå®¢æˆ¶å¯æŸ¥çœ‹æ‰€æœ‰æ‰¹æ¬¡çš„æäº¤ç´€éŒ„
- å®Œæ•´å½±ç‰‡ç·¨è¼¯æµç¨‹ï¼šAdmin/Uploader å¯å³æ™‚æ›´æ–°å½±ç‰‡è³‡è¨Šèˆ‡å°é¢
- BrandTransition + Glassmorphism UIï¼Œç¢ºä¿ç™»å…¥/ç™»å‡ºé«”é©—èˆ‡ä¸»è¦é é¢å‹•ç·šä¸€è‡´

## ğŸ†• 2026-01-03 æ›´æ–°é‡é»

> å®Œæ•´èªªæ˜è«‹è¦‹ç›¸é—œæŠ€è¡“æ–‡æª”

### v3.0.3 è·¨æœˆä»½é¸æ“‡åŒæ­¥ä¿®æ­£ ğŸ”§

- **ğŸ¯ æ ¸å¿ƒå•é¡Œä¿®æ­£**ï¼š
  - ä¿®æ­£åŒä¸€å½±ç‰‡åœ¨ä¸åŒæœˆä»½æœ‰ä¸åŒ ID å°è‡´ç„¡æ³•è­˜åˆ¥çš„å•é¡Œ
  - æ”¹ç”¨å½±ç‰‡æ¨™é¡Œ (`title`) ä½œç‚ºå”¯ä¸€è­˜åˆ¥ï¼Œå¯¦ç¾çœŸæ­£çš„è·¨æœˆä»½é¸æ“‡åŒæ­¥
  - æ–°å¢ `customerListTitles` å’Œ `pendingChangesTitles` ç‹€æ…‹ç®¡ç†
  
- **ğŸ“§ éƒµä»¶é€šçŸ¥å„ªåŒ–**ï¼š
  - é‡æ§‹éƒµä»¶æœå‹™ï¼Œç›´æ¥ä½¿ç”¨å‰ç«¯è™•ç†å¥½çš„æ–°å¢/ç§»é™¤æ¸…å–®
  - ç§»é™¤å¾Œç«¯è¤‡é›œçš„ `video.id` å·®ç•°è¨ˆç®—é‚è¼¯
  - éƒµä»¶æ¨¡æ¿æ”¹ç‚ºåˆ†åˆ¥é¡¯ç¤ºã€Œæ–°å¢å½±ç‰‡ã€å’Œã€Œç§»é™¤å½±ç‰‡ã€æ¸…å–®
  - ç¢ºä¿éƒµä»¶ä¸­ä¸æœƒå‡ºç¾é‡è¤‡å½±ç‰‡
  
- **ğŸ”„ è³‡æ–™æµç¨‹å„ªåŒ–**ï¼š
  - å‰ç«¯ä½¿ç”¨æ¨™é¡Œå»é‡å¾Œå†æäº¤çµ¦å¾Œç«¯
  - LocalStorage åŒæ™‚ä¿å­˜ ID å’Œæ¨™é¡Œé›†åˆ
  - æäº¤ç¢ºèªå½ˆçª—æ­£ç¢ºé¡¯ç¤ºæ‰€æœ‰é¸æ“‡ï¼ˆç„¡é‡è¤‡ï¼‰

### v3.0.2 è·¨æœˆä»½é¸æ“‡é«”é©—å„ªåŒ–

- **ğŸ¯ æ™ºèƒ½è·¨æœˆä»½é¸æ“‡åŒæ­¥**ï¼š
  - ç•¶åŒä¸€éƒ¨å½±ç‰‡å‡ºç¾åœ¨å¤šå€‹æœˆä»½æ¸…å–®æ™‚ï¼Œé¸æ“‡ç‹€æ…‹æœƒè‡ªå‹•åŒæ­¥
  - ä¾‹å¦‚ï¼šåœ¨ 2025-11 é¸æ“‡ C å½±ç‰‡å¾Œï¼Œåˆ‡æ›åˆ° 2025-12 æ™‚ï¼ŒC å½±ç‰‡æœƒè‡ªå‹•é¡¯ç¤ºç‚ºå·²é¸æ“‡ç‹€æ…‹
  - æ–°å¢ `allMonthsVideos` ç‹€æ…‹ç®¡ç†ï¼Œå„²å­˜æ‰€æœ‰å·²è¼‰å…¥æœˆä»½çš„å½±ç‰‡è³‡æ–™
  
- **ğŸ“‹ æäº¤ç¢ºèªå„ªåŒ–**ï¼š
  - ç¢ºèªæäº¤å½ˆçª—ç¾åœ¨æœƒæ­£ç¢ºé¡¯ç¤ºæ‰€æœ‰é¸æ“‡çš„å½±ç‰‡ï¼ˆä¸è«–ä¾†è‡ªå“ªå€‹æœˆä»½ï¼‰
  - è‡ªå‹•å»é‡ï¼ŒåŒä¸€å½±ç‰‡åªé¡¯ç¤ºä¸€æ¬¡
  - å¾æ‰€æœ‰æœˆä»½çš„å½±ç‰‡é›†åˆä¸­æŸ¥æ‰¾å¾…æ–°å¢å½±ç‰‡ï¼Œè€Œéåƒ…é™ç•¶å‰æœˆä»½
  
- **âœï¸ æ–‡å­—å„ªåŒ–**ï¼š
  - æ‡¸æµ®å¡ç‰‡æŒ‰éˆ•ï¼šã€Œæäº¤è®Šæ›´ã€â†’ã€Œæäº¤é¸æ“‡ã€
  - ç¢ºèªå½ˆçª—æ¨™é¡Œï¼šã€Œç¢ºèªæäº¤è®Šæ›´ã€â†’ã€Œç¢ºèªæäº¤é¸æ“‡ã€
  - çµ±ä¸€ä½¿ç”¨ã€Œé¸æ“‡ã€è€Œéã€Œè®Šæ›´ã€ï¼Œæ›´ç¬¦åˆæ¥­å‹™èªç¾©

### v3.0.1 éƒµä»¶é€šçŸ¥é–‹é—œç®¡ç†

- **ğŸ“§ éƒµä»¶é€šçŸ¥é–‹é—œç®¡ç†**ï¼š
  - æ–°å¢ç³»çµ±è¨­å®šåŠŸèƒ½ï¼Œå¯æ§åˆ¶ã€Œå®¢æˆ¶æäº¤å½±ç‰‡é¸æ“‡ã€å’Œã€Œæ–°å½±ç‰‡æ¸…å–®ä¸Šå‚³ã€çš„è‡ªå‹•éƒµä»¶é€šçŸ¥
  - ç®¡ç†å“¡å¯åœ¨éƒµä»¶ç®¡ç†é é¢è¼•é¬†å•Ÿç”¨æˆ–åœç”¨è‡ªå‹•éƒµä»¶åŠŸèƒ½
  - åœç”¨å¾Œä»å¯é€éã€Œè£œç™¼é€šçŸ¥ã€åŠŸèƒ½æ‰‹å‹•ç™¼é€éƒµä»¶
  - æ–°å¢ `system_settings` è³‡æ–™åº«è¡¨å„²å­˜ç³»çµ±è¨­å®š
  - æ‰€æœ‰é–‹é—œè®Šæ›´æœƒè¨˜éŒ„åœ¨æ“ä½œæ—¥èªŒä¸­

### v3.0.0 æ ¸å¿ƒé‡æ§‹èˆ‡ä¿®æ­£

- **ğŸ¯ å½±ç‰‡é¸æ“‡é é¢é‡æ§‹ï¼ˆMovieSelection_v3ï¼‰**ï¼šå…¨æ–°çš„å®¢æˆ¶æ¸…å–®ç®¡ç†ç³»çµ±ï¼Œæ”¯æ´è·¨æœˆä»½é¸æ“‡ã€å¾…è™•ç†è®Šæ›´è¿½è¹¤ã€LocalStorage è‡ªå‹•ä¿å­˜ã€‚
- **ğŸ› é—œéµ Bug ä¿®æ­£**ï¼š
  - ä¿®æ­£ `currentSelectedIds` æœªå®šç¾©éŒ¯èª¤ï¼Œä½¿ç”¨ `useMemo` è¨ˆç®—ç•¶å‰é¸æ“‡å½±ç‰‡ç¸½æ•¸
  - ä¿®æ­£ API éŸ¿æ‡‰æ ¼å¼ä¸ä¸€è‡´å•é¡Œï¼ˆ`backend/customerList.js` è¿”å›æ ¼å¼çµ±ä¸€ï¼‰
  - ä¿®æ­£æœˆä»½é¸æ“‡å™¨é¡¯ç¤º "undefined-undefined" å•é¡Œ
  - ä¿®æ­£ Select çµ„ä»¶äº‹ä»¶è™•ç†ï¼Œç¢ºä¿æ­£ç¢ºæå– `e.target.value`
  
### UI/UX å…¨é¢å„ªåŒ–

- **ğŸ¨ è¦–è¦ºå‡ç´š**ï¼š
  - å…¨ç«™ä¸»é¡Œè‰²çµ±ä¸€ç‚ºæ©˜è‰²ï¼ˆPrimaryï¼‰ï¼Œç§»é™¤æ‰€æœ‰ç´«è‰²å…ƒç´ 
  - æ–°å¢ `MovieCard_v3` çµ„ä»¶ï¼Œæä¾›æ¸…æ™°çš„è¦–è¦ºç‹€æ…‹å›é¥‹ï¼ˆå·²é¸æ“‡ã€å¾…æ–°å¢ã€å¾…ç§»é™¤ï¼‰
  - æ”¯æ´ç¶²æ ¼/åˆ—è¡¨é›™è¦–åœ–æ¨¡å¼åˆ‡æ›
  - é é¢ padding èˆ‡å…¶ä»–é é¢ä¿æŒä¸€è‡´æ€§
  
- **âœ¨ æ‡¸æµ®å¡ç‰‡å„ªåŒ–**ï¼š
  - ä½¿ç”¨ React Portal ç¢ºä¿å¡ç‰‡å›ºå®šåœ¨ç€è¦½å™¨è¦–çª—åº•éƒ¨ï¼ˆè€Œéé é¢åº•éƒ¨ï¼‰
  - å¢å¼·æ¯›ç»ç’ƒæ•ˆæœï¼ˆGlassmorphismï¼‰ï¼šæ¼¸å±¤é€æ˜åº¦ã€æ¨¡ç³Š 20pxã€é£½å’Œåº¦å¢å¼· 180%
  - å¯¦æ™‚é¡¯ç¤ºå·²é¸æ“‡å½±ç‰‡æ•¸é‡ã€æ–°å¢æ•¸é‡ã€ç§»é™¤æ•¸é‡
  
- **ğŸ“¢ Toast è¨Šæ¯ä¿®æ­£**ï¼š
  - ä¿®æ­£æ‰€æœ‰ `showToast` åƒæ•¸é †åºï¼Œç¢ºä¿è¨Šæ¯æ­£ç¢ºé¡¯ç¤º
  - æ‰€æœ‰æç¤ºè¨Šæ¯çµ±ä¸€ç‚ºä¸­æ–‡ï¼ˆç§»é™¤ "success"ã€"error" ç­‰è‹±æ–‡æç¤ºï¼‰

### æŠ€è¡“æ”¹é€²

- **âš¡ æ€§èƒ½å„ªåŒ–**ï¼šä½¿ç”¨ `useMemo` é¿å…ä¸å¿…è¦çš„é‡è¤‡è¨ˆç®—
- **ğŸ”§ ä»£ç¢¼å“è³ª**ï¼šç§»é™¤å¤šé¤˜çš„ info toast æç¤ºï¼Œæ”¹é€²äº‹ä»¶è™•ç†é‚è¼¯
- **ğŸ“¦ çµ„ä»¶åŒ–**ï¼šå»ºç«‹å¯é‡ç”¨çš„ `MovieCard_v3` çµ„ä»¶ï¼Œæ”¯æ´å¤šç¨®é¡¯ç¤ºæ¨¡å¼

### åƒè€ƒæ–‡æª”

- [CROSS_MONTH_SELECTION_FIX.md](CROSS_MONTH_SELECTION_FIX.md) - è·¨æœˆä»½é¸æ“‡åŒæ­¥ä¿®æ­£ â­ v3.0.3
- [REFACTOR_V3_DEPLOYMENT_GUIDE.md](REFACTOR_V3_DEPLOYMENT_GUIDE.md) - v3 é‡æ§‹éƒ¨ç½²æŒ‡å—
- [CRITICAL_BUG_FIX.md](CRITICAL_BUG_FIX.md) - é—œéµéŒ¯èª¤ä¿®æ­£
- [UI_UX_OPTIMIZATION_SUMMARY.md](UI_UX_OPTIMIZATION_SUMMARY.md) - UI/UX å„ªåŒ–ç¸½çµ
- [PORTAL_FIX_SUMMARY.md](PORTAL_FIX_SUMMARY.md) - Portal ä¿®æ­£èªªæ˜
- [GLASSMORPHISM_TOAST_FIX.md](GLASSMORPHISM_TOAST_FIX.md) - æ¯›ç»ç’ƒæ•ˆæœèˆ‡ Toast ä¿®æ­£

## ğŸ“œ 2025-11-24 æ›´æ–°é‡é» (v2.x)

> å®Œæ•´èªªæ˜è«‹è¦‹ [UPDATE_SUMMARY_2025_11_24.md](UPDATE_SUMMARY_2025_11_24.md)

- **è§’è‰²é¡¯ç¤ºèˆ‡å°è¦½å¼·åŒ–**ï¼šSettingsã€Layout èˆ‡ `/movies` è·¯ç”±ç¾å¯æ­£ç¢ºå€åˆ† Admin / Uploader / Customerï¼Œä¸¦é˜»æ“‹ä¸Šå‚³è€…èª¤å…¥å®¢æˆ¶é é¢ã€‚
- **Uploader Dashboard ä¸Šç·š**ï¼šæä¾›å°ˆå±¬é¦–é ã€ä¸Šå‚³èˆ‡é¸æ“‡ç‹€æ…‹è¦–è¦ºåŒ–ã€å¿«é€Ÿæ“ä½œå…¥å£ï¼Œä»¥åŠã€Œè£œç™¼ä¸Šå‚³é€šçŸ¥ã€æŒ‰éˆ•ã€‚
- **é€šçŸ¥ API æ“´å……**ï¼šæ–°å¢ `POST /api/mail-rules/notifications/upload`ï¼Œè®“ Admin/Uploader èƒ½åœ¨å®¢æˆ¶æœªæ”¶ä¿¡æ™‚ç«‹å³é‡é€éƒµä»¶ï¼Œä¸¦åŒæ­¥å¯«å…¥ Operation Logsã€‚
- **ç®¡ç†å„€è¡¨æ¿ + UI å„ªåŒ–**ï¼šAdmin Dashboard æ”¯æ´æœˆä»½åˆ‡æ›ï¼›å…¨ç«™è¼¸å…¥å…ƒä»¶æ”¹ç‚º compact é¢¨æ ¼ä¸¦çµ±ä¸€æ¨£å¼ï¼›Operation Logsã€Select å…ƒä»¶ä¿®æ­£ warningã€‚
- **æé†’è¨­å®šé‡æ§‹**ï¼šMail Management é ç§»å…¥æé†’è¨­å®šï¼Œæ”¯æ´å³æ™‚é–‹é—œã€é è¨­é€šçŸ¥ä¸Šå‚³è€…ã€é¡å¤– Email å»é‡ï¼Œä¸¦å°‡è¨­å®šæŒä¹…åŒ–åœ¨ `system_settings`ã€‚
- **ä½¿ç”¨è€… CRUD å¼·åŒ–**ï¼šUserManagement æ”¯æ´æ–°å¢/åˆªé™¤å¸³è™Ÿï¼Œå¾Œç«¯æ–°å¢ç›¸å°æ‡‰ APIï¼Œä¸”æ‰€æœ‰å‹•ä½œçš†è¨˜éŒ„æ–¼ Operation Logsã€‚
- **ğŸ¯ æœˆä»½é¸æ“‡å·®ç•°è¿½è¹¤ï¼ˆv2.2.0ï¼‰**ï¼šå®¢æˆ¶é¸ç‰‡æ™‚è‡ªå‹•é¡¯ç¤ºä¸Šæœˆå·²é¸æ¸…å–®ï¼Œé€å‡ºå‰å½ˆå‡ºç¢ºèªè¦–çª—æ¸…æ¥šå‘ˆç¾ç•°å‹•ï¼ˆä¸‹æ¶/æ–°å¢/ä¿ç•™ï¼‰ï¼Œéƒµä»¶é€šçŸ¥ä¹ŸåŒ…å«å®Œæ•´å·®ç•°æ‘˜è¦ã€‚è©³è¦‹ [MONTHLY_SELECTION_DIFF_IMPLEMENTATION.md](MONTHLY_SELECTION_DIFF_IMPLEMENTATION.md)ã€‚
- **ğŸ”§ ä¸Šå‚³æœˆä»½è­˜åˆ¥å„ªåŒ–ï¼ˆv2.2.1ï¼‰**ï¼šä¿®æ­£ä¸Šå‚³æ™‚æœˆä»½èª¤åˆ¤å•é¡Œï¼Œç³»çµ±ç¾å„ªå…ˆå¾æ‰¹æ¬¡åç¨±æå–æœˆä»½ï¼Œå…¶æ¬¡æª”åï¼Œæœ€å¾Œæ‰ä½¿ç”¨ç³»çµ±æ—¥æœŸã€‚æ”¯æ´å¤šç¨®æœˆä»½æ ¼å¼ï¼ˆå¦‚ã€Œ10æœˆã€ã€ã€Œ2024-10ã€ç­‰ï¼‰ã€‚è©³è¦‹ [UPLOAD_MONTH_EXTRACTION_FIX.md](UPLOAD_MONTH_EXTRACTION_FIX.md)ã€‚

> âœ… å¦å¯åƒè€ƒ [NEW_FEATURES_SUMMARY.md](NEW_FEATURES_SUMMARY.md)ã€[UI_IMPROVEMENTS_SUMMARY.md](UI_IMPROVEMENTS_SUMMARY.md)ã€[DESIGN_REFINEMENT_SUMMARY.md](DESIGN_REFINEMENT_SUMMARY.md) èˆ‡ [OPTIMIZATION_LOG_2025_11.md](OPTIMIZATION_LOG_2025_11.md) äº†è§£ç‰ˆæœ¬ 2.0~2.1.2 çš„å®Œæ•´è®Šæ›´èˆ‡è¨­è¨ˆç†å¿µã€‚

## åŠŸèƒ½ç‰¹è‰²

### ä¸‰å±¤æ¬Šé™æ¶æ§‹ â­ æ–°å¢

#### ç®¡ç†å“¡ (Admin)
- âœ… ä¸Šå‚³åŒ…å«åµŒå…¥åœ–ç‰‡çš„ Excel å½±ç‰‡æ¸…å–®
- âœ… ç·¨è¼¯å’Œåˆªé™¤æ‰¹æ¬¡
- âœ… æŸ¥çœ‹æ‰€æœ‰å®¢æˆ¶çš„é¸æ“‡ç‹€æ…‹
- âœ… æŸ¥çœ‹æ­·å²ä¸Šå‚³è¨˜éŒ„
- âœ… è¨­å®šæ¯æœˆæé†’é€šçŸ¥
- âœ… ç®¡ç†æ‰€æœ‰ç”¨æˆ¶è§’è‰²
- âœ… æŸ¥çœ‹ç³»çµ±æ“ä½œç´€éŒ„ï¼ˆAudit Logï¼‰
- âœ… æŸ¥çœ‹å„æœˆä»½æ‰€æœ‰å®¢æˆ¶çš„å·²é¸æ¸…å–®èˆ‡ç•°å‹•æ‘˜è¦

#### ä¸Šå‚³è€… (Uploader) â­ æ–°å¢
- âœ… ä¸Šå‚³åŒ…å«åµŒå…¥åœ–ç‰‡çš„ Excel å½±ç‰‡æ¸…å–®
- âœ… ç·¨è¼¯å½±ç‰‡è³‡è¨Š
- âœ… æŸ¥çœ‹æ‰€æœ‰å®¢æˆ¶çš„é¸æ“‡ç‹€æ…‹
- âŒ ç„¡æ³•åˆªé™¤æ‰¹æ¬¡
- âŒ ç„¡æ³•è¨­å®šæé†’é€šçŸ¥
- âŒ ç„¡æ³•ç®¡ç†ç”¨æˆ¶

#### å®¢æˆ¶ (Customer)
- âœ… ç€è¦½ç•¶æœˆå¯é¸æ“‡çš„å½±ç‰‡æ¸…å–®ï¼ˆå«åœ–ç‰‡ï¼‰
- âœ… é¸æ“‡æƒ³è¦çš„å½±ç‰‡ï¼ˆæ”¯æ´ç¶²æ ¼/åˆ—è¡¨é›™è¦–åœ–ï¼‰
- âœ… è·¨æœˆä»½é¸æ“‡å½±ç‰‡ï¼ˆå¾ä»»ä½•å¯ç”¨æœˆä»½æ·»åŠ è‡³æ¸…å–®ï¼‰
- âœ… **æ™ºèƒ½è·¨æœˆä»½åŒæ­¥**ï¼šåŒä¸€å½±ç‰‡åœ¨å¤šå€‹æœˆä»½çš„é¸æ“‡ç‹€æ…‹è‡ªå‹•åŒæ­¥ â­ v3.0.2
- âœ… å³æ™‚æŸ¥çœ‹å·²é¸æ“‡å½±ç‰‡ç‹€æ…‹ï¼ˆå·²æ“æœ‰ã€å¾…æ–°å¢ã€å¾…ç§»é™¤ï¼‰
- âœ… æ‡¸æµ®å¡ç‰‡é¡¯ç¤ºç•¶å‰é¸æ“‡æ•¸é‡èˆ‡å¾…è™•ç†è®Šæ›´
- âœ… è‡ªå‹•æª¢è¦–ä¸Šæœˆå·²é¸ç‰‡å–®ï¼Œå¯æ¯”å°ç•°å‹•
- âœ… **æäº¤ç¢ºèªé¡¯ç¤ºæ‰€æœ‰é¸æ“‡**ï¼šä¸è«–å½±ç‰‡ä¾†è‡ªå“ªå€‹æœˆä»½ï¼Œéƒ½æœƒåœ¨ç¢ºèªå½ˆçª—ä¸­å®Œæ•´é¡¯ç¤º â­ v3.0.2
- âœ… æäº¤é¸æ“‡æ¸…å–®ï¼ˆè®Šæ›´è‡ªå‹•ä¿å­˜è‡³ LocalStorageï¼‰
- âœ… æ¥æ”¶æ–°æ¸…å–®ä¸Šå‚³é€šçŸ¥

### è‡ªå‹•åŒ–åŠŸèƒ½
- ç®¡ç†å“¡ä¸Šå‚³æ¸…å–®å¾Œï¼Œè‡ªå‹•ç™¼é€ Email é€šçŸ¥æ‰€æœ‰å®¢æˆ¶ï¼ˆå¯é€éé–‹é—œæ§åˆ¶ï¼‰
- å®¢æˆ¶æäº¤é¸æ“‡å¾Œï¼Œè‡ªå‹•ç™¼é€ Email çµ¦ç®¡ç†å“¡ï¼ˆå«ä¸Šæœˆæ¯”å°å·®ç•°ï¼Œå¯é€éé–‹é—œæ§åˆ¶ï¼‰
- æ”¯æ´è¨­å®šæ¯æœˆå›ºå®šæ—¥æœŸæé†’ç®¡ç†å“¡ä¸Šå‚³æ¸…å–®
- è‡ªå‹•è¿½è¹¤èˆ‡è¨ˆç®—æœˆä»½é–“çš„å½±ç‰‡ç•°å‹•
- éƒµä»¶é€šçŸ¥é–‹é—œç®¡ç†ï¼šå¯åœ¨éƒµä»¶ç®¡ç†é é¢å•Ÿç”¨æˆ–åœç”¨è‡ªå‹•éƒµä»¶åŠŸèƒ½

## å°ˆæ¡ˆçµæ§‹

```
Fashion_movielist/
â”œâ”€â”€ frontend/                 # React å‰ç«¯æ‡‰ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/      # å¯é‡ç”¨çµ„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/          # é é¢çµ„ä»¶
â”‚   â”‚   â”œâ”€â”€ contexts/       # React Context
â”‚   â”‚   â”œâ”€â”€ lib/            # å·¥å…·å‡½æ•¸
â”‚   â”‚   â””â”€â”€ App.jsx         # ä¸»æ‡‰ç”¨çµ„ä»¶
â”‚   â”œâ”€â”€ public/             # éœæ…‹è³‡æº
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ backend/                 # Node.js å¾Œç«¯ API
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ routes/         # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ services/       # æ¥­å‹™é‚è¼¯
â”‚   â”‚   â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•¸
â”‚   â”‚   â””â”€â”€ server.js       # ä¼ºæœå™¨å…¥å£
â”‚   â”œâ”€â”€ .env.example        # ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ database/               # è³‡æ–™åº«ç›¸é—œ
â”‚   â””â”€â”€ schema.sql         # Supabase è³‡æ–™åº«çµæ§‹
â”‚
â””â”€â”€ README.md              # å°ˆæ¡ˆèªªæ˜æ–‡ä»¶
```

## ç’°å¢ƒè¨­å®š

### å‰ç½®éœ€æ±‚
- Node.js 18+ 
- npm æˆ– yarn
- Supabase å¸³è™Ÿ
- Azure AD æ‡‰ç”¨ç¨‹å¼ï¼ˆç”¨æ–¼ Microsoft Graph APIï¼‰

### å®‰è£æ­¥é©Ÿ

1. **Clone å°ˆæ¡ˆ**
```bash
cd Fashion_movielist
```

2. **å®‰è£å¾Œç«¯ä¾è³´**
```bash
cd backend
npm install
```

3. **è¨­å®šå¾Œç«¯ç’°å¢ƒè®Šæ•¸**
```bash
cp .env.example .env
# ç·¨è¼¯ .env å¡«å…¥ä»¥ä¸‹è³‡è¨Šï¼š
# - SUPABASE_URL
# - SUPABASE_SERVICE_KEY
# - AZURE_CLIENT_ID
# - AZURE_CLIENT_SECRET
# - AZURE_TENANT_ID
# - ADMIN_EMAIL
```

4. **è¨­å®š Supabase è³‡æ–™åº«**
- ç™»å…¥ Supabase Dashboard
- åŸ·è¡Œ `database/schema.sql` ä¸­çš„ SQL æŒ‡ä»¤

5. **å®‰è£å‰ç«¯ä¾è³´**
```bash
cd ../frontend
npm install
```

6. **è¨­å®šå‰ç«¯ç’°å¢ƒè®Šæ•¸**
```bash
# åœ¨ frontend/.env ä¸­è¨­å®šï¼š
# VITE_SUPABASE_URL=your_supabase_url
# VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
# VITE_API_URL=http://localhost:3000
```

### Azure AD Client Secret æé†’

è«‹ç¢ºä¿ `.env` ä¸­ `AZURE_CLIENT_SECRET` å¡«å…¥ **Client Secret Value**ï¼ˆé€šå¸¸åŒ…å« `~`ï¼‰ï¼Œä¸è¦å¡«å…¥ Secret IDã€‚è‹¥å¿˜è¨˜è¤‡è£½ Valueï¼Œéœ€è¦åœ¨ Azure Portal é‡æ–°å»ºç«‹æ–°çš„ Secretã€‚è©³ç´°æ­¥é©Ÿè«‹è¦‹ [AZURE_AD_SETUP_FIX.md](AZURE_AD_SETUP_FIX.md)ã€‚

## é–‹ç™¼æ¨¡å¼

### å•Ÿå‹•å¾Œç«¯
```bash
cd backend
npm run dev
# å¾Œç«¯å°‡åœ¨ http://localhost:3000 é‹è¡Œ
```

### å•Ÿå‹•å‰ç«¯
```bash
cd frontend
npm run dev
# å‰ç«¯å°‡åœ¨ http://localhost:5173 é‹è¡Œ
```

## éƒ¨ç½²

### å‰ç«¯éƒ¨ç½²ï¼ˆVercelï¼‰
```bash
cd frontend
npm run build
# ä½¿ç”¨ Vercel CLI æˆ–é€£æ¥ GitHub è‡ªå‹•éƒ¨ç½²
```

### å¾Œç«¯éƒ¨ç½²ï¼ˆRenderï¼‰
- é€£æ¥ GitHub repository
- è¨­å®šç’°å¢ƒè®Šæ•¸
- é¸æ“‡ Node.js ç’°å¢ƒ
- è¨­å®šå•Ÿå‹•å‘½ä»¤: `npm start`

## ğŸ§© ä¸»è¦åŠŸèƒ½èˆ‡æª”æ¡ˆ

### å½±ç‰‡æ‰¹æ¬¡èˆ‡æœˆä»½æµç¨‹

- `backend/src/routes/upload.js` æœƒå¾ä¸Šå‚³ Excel åç¨±æå–æœˆä»½ä¸¦å¯«å…¥ `batches.month` (`YYYY-MM`)ï¼›è‹¥ä¸åˆæ³•å‰‡ fallback ç‚ºç•¶æœˆã€‚
- `frontend/src/pages/MovieSelection.jsx`ã€`VideoManagement.jsx` èˆ‡ `AdminDashboard.jsx` å…§å»ºæœˆä»½é¸æ“‡å™¨ï¼Œå¯è¼‰å…¥æ­·å²æ‰¹æ¬¡ã€‚
- å®¢æˆ¶å¯æ–¼ `SelectionHistory.jsx` æŸ¥çœ‹æ‰€æœ‰æäº¤ç´€éŒ„èˆ‡ç¸®åœ–ï¼Œç®¡ç†å“¡/ä¸Šå‚³è€…äº¦å¯æª¢è¦–ã€‚
- å½±ç‰‡ç·¨è¼¯ï¼ˆ`VideoEditModal.jsx` + `videos.js` APIï¼‰æ”¯æ´æ–‡å­—æ¬„ä½ã€å°é¢æ›¿æ›ã€å³æ™‚é è¦½èˆ‡æ¬Šé™æ§ç®¡ã€‚

### Operation Logsï¼ˆæ“ä½œç´€éŒ„ï¼‰

### Operation Logsï¼ˆæ“ä½œç´€éŒ„ï¼‰

- `public.operation_logs` è¡¨è¨˜éŒ„æ‰€æœ‰æ•æ„Ÿæ“ä½œã€‚
- å¾Œç«¯ `recordOperationEvent` æœå‹™çµ±ä¸€å¯«å…¥ã€‚
- å‰ç«¯ `/operation-logs` é é¢æä¾›å¡ç‰‡/æ¸…å–®é›™è¦–åœ–ã€ç¯©é¸ã€é‡æ–°æ•´ç†ã€‚
- ç®¡ç†å“¡å¯åœ¨è¨­å®šé èª¿æ•´ä¿ç•™å¤©æ•¸ï¼ˆ7â€“365 å¤©ï¼‰ï¼Œç«‹å³è§¸ç™¼æ¸…ç†ä¸¦æ–¼ metadata ç´€éŒ„åˆªé™¤ç­†æ•¸ã€‚
- ç›¸é—œèªªæ˜è«‹åƒè€ƒ [OPERATION_LOGS_IMPLEMENTATION.md](OPERATION_LOGS_IMPLEMENTATION.md)ã€‚

### Mail Management èˆ‡æé†’è¨­å®š

- è¨­å®šé é¢ç§»è‡³ `MailManagement`ï¼Œé–‹é—œç‚ºå³æ™‚ç”Ÿæ•ˆï¼Œåœç”¨æ™‚ UI æœƒé–å®šè¨­å®šé¿å…èª¤æ“ä½œã€‚
- **éƒµä»¶é€šçŸ¥å…¨å±€é–‹é—œ**ï¼šå¯ç¨ç«‹æ§åˆ¶ã€Œå®¢æˆ¶æäº¤å½±ç‰‡é¸æ“‡ã€å’Œã€Œæ–°å½±ç‰‡æ¸…å–®ä¸Šå‚³ã€çš„è‡ªå‹•éƒµä»¶é€šçŸ¥ã€‚
- é è¨­é€šçŸ¥å°è±¡åŒ…å«æ‰€æœ‰ä¸Šå‚³è€…ï¼Œå¦å¯æ–°å¢é¡å¤– Emailï¼Œç³»çµ±æœƒè‡ªå‹•åµæ¸¬é‡è¤‡èˆ‡æ ¼å¼ã€‚
- æ’ç¨‹è¨­å®šï¼ˆæ—¥æœŸã€æ™‚é–“ã€è¨Šæ¯ï¼‰ç›´æ¥åŒæ­¥è‡³å¾Œç«¯ `system_settings`ï¼Œä¼ºæœå™¨é‡å•Ÿä¸æœƒéºå¤±ã€‚
- é€éã€Œè£œç™¼ä¸Šå‚³é€šçŸ¥ã€å¯é‡æ–°å¯„é€æœ¬æœˆç‰‡å–®æé†’çµ¦æ‰€æœ‰å®¢æˆ¶ï¼ˆä¸å—é–‹é—œå½±éŸ¿ï¼‰ã€‚
- é–‹é—œè®Šæ›´æœƒè‡ªå‹•è¨˜éŒ„åœ¨æ“ä½œæ—¥èªŒä¸­ï¼Œæ–¹ä¾¿è¿½è¹¤ç³»çµ±è¨­å®šæ­·å²ã€‚

### UI/UX è¨­è¨ˆæº–å‰‡èˆ‡å„ªåŒ–

- v3.0.0 å…¨é¢çµ±ä¸€ **æ©˜è‰²ä¸»é¡Œï¼ˆPrimaryï¼‰+ å¢å¼·æ¯›ç»ç’ƒæ•ˆæœ**ï¼šæ‰€æœ‰ç´«è‰²å…ƒç´ å·²ç§»é™¤ï¼Œå…¨ç«™æ¡ç”¨æ©˜è‰²ä½œç‚ºä¸»é¡Œè‰²ã€‚
- **Glassmorphism å‡ç´š**ï¼šæ‡¸æµ®å¡ç‰‡æ¡ç”¨æ¼¸å±¤é€æ˜åº¦ï¼ˆ80% â†’ 70% â†’ 60%ï¼‰ã€æ¨¡ç³Š 20pxã€é£½å’Œåº¦å¢å¼· 180%ï¼Œå‰µé€ æ·±åº¦æ„Ÿèˆ‡è³ªæ„Ÿã€‚
- **React Portal æ‡‰ç”¨**ï¼šæ‡¸æµ®å…ƒç´ ï¼ˆå¦‚å¾…è™•ç†è®Šæ›´å¡ç‰‡ï¼‰ä½¿ç”¨ `createPortal` æ¸²æŸ“è‡³ `document.body`ï¼Œç¢ºä¿å›ºå®šåœ¨ç€è¦½å™¨è¦–çª—åº•éƒ¨ï¼Œä¸å—é é¢æ»¾å‹•å½±éŸ¿ã€‚
- æŒ‰éˆ•æ¨£å¼ï¼šæ©˜è‰²ç´”è‰²/æ¼¸å±¤çµ±ä¸€ç‚º `btn` åŸå­é¡åˆ¥ï¼Œå…·å‚™ hover é™°å½±ã€active å£“ç¸®ã€focus ring èˆ‡ç¦ç”¨æ…‹ã€‚
- è¼¸å…¥æ¡†ï¼šå…¨ç™½èƒŒæ™¯ã€2px é‚Šæ¡†ã€æ©˜è‰² focus ringã€`rounded-xl`ï¼Œç¢ºä¿ç™»å…¥/è¨»å†Šå¯è®€æ€§ã€‚
- å½±ç‰‡é¸æ“‡é ï¼ˆv3ï¼‰ï¼šæ”¯æ´ Grid / List è¦–åœ–åˆ‡æ›ã€**æ™ºèƒ½è·¨æœˆä»½é¸æ“‡åŒæ­¥**ã€å³æ™‚è¦–è¦ºç‹€æ…‹å›é¥‹ã€å¾…è™•ç†è®Šæ›´è¿½è¹¤ã€LocalStorage è‡ªå‹•ä¿å­˜ã€**å®Œæ•´æäº¤ç¢ºèªé¡¯ç¤º**ã€‚
- Login/BrandTransition ä»‹é¢æ¡ Split Layout + æ¯›ç»ç’ƒå¡ç‰‡ï¼›Footer æä¾›å®Œæ•´å…¬å¸è³‡è¨Šã€æ³•å¾‹æ¢æ¬¾èˆ‡æ”¯æ´é€£çµã€‚
- è©³ç´°åƒè€ƒï¼š[UI_IMPROVEMENTS_SUMMARY.md](UI_IMPROVEMENTS_SUMMARY.md)ã€[DESIGN_REFINEMENT_SUMMARY.md](DESIGN_REFINEMENT_SUMMARY.md)ã€[UI_UX_OPTIMIZATION_SUMMARY.md](UI_UX_OPTIMIZATION_SUMMARY.md)ã€‚

### æ ¸å¿ƒå…±ç”¨çµ„ä»¶èˆ‡è¨Šæ¯ç³»çµ±

- `Select.jsx`ï¼šè‡ªå®šç¾©ä¸‹æ‹‰é¸å–®ï¼Œæä¾›è·¨ç€è¦½å™¨ä¸€è‡´ UIã€hover/focus æ¨£å¼èˆ‡æ»¾å‹•æ¢å„ªåŒ–ã€‚äº‹ä»¶è™•ç†å·²ä¿®æ­£ç‚ºæ­£ç¢ºçš„ `e.target.value` æ ¼å¼ã€‚
- `ToastContext.jsx`ï¼šçµ±ä¸€è·¯å¾‘è¨Šæ¯ï¼Œä¾æˆåŠŸ/éŒ¯èª¤/è­¦å‘Š/è³‡è¨Šå¥—ç”¨ä¸åŒåº•è‰²ä¸¦å…·æ»‘å…¥æ·¡å‡ºå‹•ç•«ï¼ˆå–ä»£èˆŠ alertï¼‰ã€‚æ‰€æœ‰è¨Šæ¯åƒæ•¸é †åºå·²çµ±ä¸€ç‚º `(message, type)`ã€‚
- `Modal.jsx`ï¼šæ¡ç”¨åŸç”Ÿ `createPortal`ï¼Œå…§å»º ESC/èƒŒæ™¯é—œé–‰ã€focus trapã€scroll lockï¼Œç§»é™¤å° headless UI ä¾è³´ã€‚
- `MovieCard_v3.jsx` â­ æ–°å¢ï¼šå¢å¼·å‹å½±ç‰‡å¡ç‰‡çµ„ä»¶ï¼Œæ”¯æ´å¤šç¨®è¦–è¦ºç‹€æ…‹ï¼ˆå·²æ“æœ‰ã€å¾…æ–°å¢ã€å¾…ç§»é™¤ï¼‰èˆ‡ç¶²æ ¼/åˆ—è¡¨é›™é¡¯ç¤ºæ¨¡å¼ã€‚
- `emailService.js`ï¼šéƒµä»¶æ¨¡æ¿æ”¹ç‚ºæ¥µç°¡æ’ç‰ˆ + æ‘˜è¦è³‡è¨Šå¡ï¼Œä¸¦æä¾›å¯å¸¶ä¸»æ—¨çš„æ”¯æ´é€£çµã€‚

### æ³•å¾‹æ–‡ä»¶èˆ‡é è…³

- `LegalDocs.jsx` èšåˆéš±ç§æ¬Šæ”¿ç­–ã€ä½¿ç”¨æ¢æ¬¾ä¸¦é€é Modal é¡¯ç¤ºï¼Œé¿å…è·³é ï¼›Footer ä»¥ä¸­è‹±æ–‡å…¬å¸è³‡è¨Šã€æ”¯æ´é€£çµèˆ‡ç‰ˆæ¬Šè²æ˜æ§‹æˆã€‚

### Excel æ ¼å¼è¦æ±‚

ä¸Šå‚³çš„ Excel æª”æ¡ˆå¿…é ˆåŒ…å«ä»¥ä¸‹æ¬„ä½ï¼š
- åœ–ç‰‡ï¼ˆåµŒå…¥å¼åœ–ç‰‡ï¼‰
- ç‰‡å
- è‹±æ–‡ç‰‡å
- ç°¡ä»‹
- å°æ¼”
- ç”·æ¼”å“¡
- å¥³æ¼”å“¡
- ç‰‡é•·
- ç´šåˆ¥
- ç™¼éŸ³
- å­—å¹•

### API ç«¯é»ç¸½è¦½

### èªè­‰ç›¸é—œ
- `POST /api/auth/register` - è¨»å†Šæ–°ç”¨æˆ¶
- `POST /api/auth/login` - ç”¨æˆ¶ç™»å…¥

### å½±ç‰‡ç®¡ç†
- `GET /api/videos/latest` - ç²å–æœ€æ–°å½±ç‰‡æ¸…å–®
- `POST /api/upload` - ä¸Šå‚³ Excel æ¸…å–®ï¼ˆç®¡ç†å“¡ï¼‰

### é¸æ“‡ç®¡ç†
- `POST /api/select` - æäº¤å½±ç‰‡é¸æ“‡ï¼ˆå®¢æˆ¶ï¼‰
- `GET /api/selections` - æŸ¥çœ‹æ‰€æœ‰é¸æ“‡ï¼ˆç®¡ç†å“¡ï¼‰

### é€šçŸ¥ç®¡ç†
- `POST /api/reminders` - è¨­å®šæé†’é€šçŸ¥
- `POST /api/mail-rules/notifications/upload` - Admin/Uploader è£œç™¼æœ€æ–°æ‰¹æ¬¡ä¸Šå‚³é€šçŸ¥ï¼ˆè¨˜éŒ„æ–¼ Operation Logsï¼‰

## ğŸ” æˆæ¬Š

æ­¤å°ˆæ¡ˆç‚ºç§æœ‰å°ˆæ¡ˆï¼Œåƒ…ä¾›å…§éƒ¨ä½¿ç”¨ã€‚

## ğŸ“š æ–‡ä»¶ç´¢å¼•

> å¦‚æœåªéœ€è¦æŸ¥æ‰¾æ–‡ä»¶ï¼Œå¯ç›´æ¥é–±è®€ [ğŸ“š_æ–‡ä»¶ç´¢å¼•.md](ğŸ“š_æ–‡ä»¶ç´¢å¼•.md)ã€‚ä»¥ä¸‹ç‚ºé‡é»ç¯€éŒ„ï¼š

| ç›®çš„ | æ¨è–¦é–±è®€ |
|------|-----------|
| ç¬¬ä¸€æ¬¡æ¥è§¸ | [START_HERE.md](START_HERE.md)ã€[QUICK_START.md](QUICK_START.md)ã€[QUICK_REFERENCE.md](QUICK_REFERENCE.md) |
| äº†è§£ v3.0 æ›´æ–° | [REFACTOR_V3_DEPLOYMENT_GUIDE.md](REFACTOR_V3_DEPLOYMENT_GUIDE.md)ã€[CRITICAL_BUG_FIX.md](CRITICAL_BUG_FIX.md)ã€[UI_UX_OPTIMIZATION_SUMMARY.md](UI_UX_OPTIMIZATION_SUMMARY.md) |
| v3.0 æŠ€è¡“ä¿®æ­£ | [PORTAL_FIX_SUMMARY.md](PORTAL_FIX_SUMMARY.md)ã€[GLASSMORPHISM_TOAST_FIX.md](GLASSMORPHISM_TOAST_FIX.md)ã€[UI_FIX_SUMMARY.md](UI_FIX_SUMMARY.md) |
| äº†è§£ v2.0 æ›´æ–° | [UPDATE_SUMMARY.md](UPDATE_SUMMARY.md)ã€[ANSWERS_TO_YOUR_QUESTIONS.md](ANSWERS_TO_YOUR_QUESTIONS.md)ã€[IMPLEMENTATION_COMPLETE.md](IMPLEMENTATION_COMPLETE.md) |
| v2.1 åŠŸèƒ½èˆ‡ UI æ”¹ç‰ˆ | [NEW_FEATURES_SUMMARY.md](NEW_FEATURES_SUMMARY.md)ã€[UI_IMPROVEMENTS_SUMMARY.md](UI_IMPROVEMENTS_SUMMARY.md)ã€[DESIGN_REFINEMENT_SUMMARY.md](DESIGN_REFINEMENT_SUMMARY.md) |
| 2025-11 å„ªåŒ–èˆ‡èª¿æ•´ | [UPDATE_SUMMARY_2025_11_24.md](UPDATE_SUMMARY_2025_11_24.md)ã€[OPTIMIZATION_LOG_2025_11.md](OPTIMIZATION_LOG_2025_11.md) |
| éƒ¨ç½²èˆ‡ç¶­é‹ | [DEPLOYMENT_RUNBOOK.md](DEPLOYMENT_RUNBOOK.md)ã€[DEPLOYMENT.md](DEPLOYMENT.md)ã€[ENV_SETUP_GUIDE.md](ENV_SETUP_GUIDE.md) |
| æ¬Šé™èˆ‡æ¸¬è©¦ | [PERMISSION_SYSTEM_UPDATE.md](PERMISSION_SYSTEM_UPDATE.md)ã€[TESTING_NEW_FEATURES.md](TESTING_NEW_FEATURES.md) |
| éƒ¨ç½²èˆ‡è¨­å®š | [DEPLOYMENT.md](DEPLOYMENT.md)ã€[ENV_SETUP_GUIDE.md](ENV_SETUP_GUIDE.md)ã€[AZURE_AD_SETUP_FIX.md](AZURE_AD_SETUP_FIX.md) |
| è³‡æ–™åº« | [database/README.md](database/README.md)ã€[database/schema.sql](database/schema.sql) |

æ›´å¤šåˆ†é¡ï¼ˆä¾è§’è‰²/ç›®çš„ï¼‰è«‹è¦‹æ–‡ä»¶ç´¢å¼•ã€‚

## ğŸ”„ ç³»çµ±è³‡æ–™é‡è¨­æµç¨‹ï¼ˆSupabaseï¼‰

ä½¿ç”¨å‰è«‹å‹™å¿…å‚™ä»½ã€‚ä»¥ä¸‹ SQL å¯åœ¨ Supabase SQL Editor ä¾åºåŸ·è¡Œï¼š

> **æ³¨æ„**ï¼šå¦‚æœæ˜¯æ–°ç³»çµ±æˆ–å°šæœªåŸ·è¡Œéé·ç§»è…³æœ¬ï¼Œè«‹å…ˆåŸ·è¡Œ `database/migration_mail_toggles.sql` ä¾†å»ºç«‹ `system_settings` è¡¨ã€‚

### 1. æ¸…ç©º `public` schema
```sql
begin;
truncate table public.operation_logs restart identity cascade;
truncate table public.password_resets restart identity cascade;
truncate table public.mail_rules restart identity cascade;
truncate table public.selections restart identity cascade;
truncate table public.videos restart identity cascade;
truncate table public.batches restart identity cascade;
truncate table public.profiles restart identity cascade;
truncate table public.system_settings restart identity cascade;
commit;
```

### 2. æ¸…ç©º Supabase Auth
```sql
begin;
delete from auth.identities;
delete from auth.users;
commit;
```

> è‹¥åƒ…ç§»é™¤ç‰¹å®šå¸³è™Ÿï¼Œå¯åœ¨ `where` å­å¥æŒ‡å®š `id` æˆ– `email`ã€‚

### 3. é‡å»ºé è¨­ç®¡ç†å“¡ï¼ˆ`support@fas.com.tw / infrasysfas`ï¼‰

```sql
insert into auth.users (
  id, instance_id, aud, role, email,
  encrypted_password, email_confirmed_at,
  raw_app_meta_data, raw_user_meta_data,
  created_at, updated_at
)
values (
  '3d3a9f09-01a9-4cd5-9149-2fcb16299b4a',
  '00000000-0000-0000-0000-000000000000',
  'authenticated','authenticated','support@fas.com.tw',
  crypt('infrasysfas', gen_salt('bf', 10)),
  now(),
  jsonb_build_object('provider', 'email', 'providers', array['email']),
  jsonb_build_object(
    'sub', '3d3a9f09-01a9-4cd5-9149-2fcb16299b4a',
    'name', 'FASsupport', 'role', 'admin',
    'email', 'support@fas.com.tw', 'email_verified', true, 'phone_verified', false
  ),
  now(), now()
);

insert into auth.identities (
  id, user_id, provider_id, provider, identity_data,
  created_at, updated_at
)
values (
  gen_random_uuid(),
  '3d3a9f09-01a9-4cd5-9149-2fcb16299b4a',
  'support@fas.com.tw','email',
  jsonb_build_object('sub','3d3a9f09-01a9-4cd5-9149-2fcb16299b4a','email','support@fas.com.tw'),
  now(), now()
);

insert into public.profiles (id, name, email, role, created_at, updated_at)
values (
  '3d3a9f09-01a9-4cd5-9149-2fcb16299b4a',
  'FASsupport','support@fas.com.tw','admin', now(), now()
);
```

å®Œæˆå¾Œè«‹æ¸…é™¤ç€è¦½å™¨ localStorage çš„ `supabase.auth.*` tokenï¼Œå†ä»¥é è¨­å¸³è™Ÿç™»å…¥ã€‚

## ğŸ“ˆ å°ˆæ¡ˆç‹€æ…‹èˆ‡è¯çµ¡

- **ç‰ˆæœ¬**ï¼šv3.0.2 ï¼ˆ2026-01-03 æ›´æ–°ï¼‰
- **ç¨‹å¼ç¢¼è¡Œæ•¸**ï¼š~7,500 è¡Œ ï½œ **æ–‡ä»¶å­—æ•¸**ï¼š~37,000 å­—
- **é‡Œç¨‹ç¢‘**ï¼š
  - âœ… ä¸‰å±¤æ¬Šé™ã€ç”¨æˆ¶ç®¡ç†ã€æ“ä½œç´€éŒ„ã€æé†’è¨­å®š
  - âœ… å½±ç‰‡é¸æ“‡ç³»çµ± v3 é‡æ§‹ï¼ˆè·¨æœˆä»½é¸æ“‡ã€å¾…è™•ç†è®Šæ›´è¿½è¹¤ï¼‰
  - âœ… **æ™ºèƒ½è·¨æœˆä»½é¸æ“‡åŒæ­¥**ï¼ˆåŒä¸€å½±ç‰‡åœ¨å¤šæœˆä»½çš„ç‹€æ…‹è‡ªå‹•åŒæ­¥ï¼‰
  - âœ… UI/UX å…¨é¢å„ªåŒ–ï¼ˆæ¯›ç»ç’ƒæ•ˆæœã€ä¸»é¡Œè‰²çµ±ä¸€ã€è¦–åœ–åˆ‡æ›ï¼‰
  - âœ… é—œéµ Bug ä¿®æ­£ï¼ˆAPI æ ¼å¼ã€äº‹ä»¶è™•ç†ã€Toast è¨Šæ¯ï¼‰
  - âœ… éƒµä»¶é€šçŸ¥é–‹é—œç®¡ç†ï¼ˆå¯æ§åˆ¶è‡ªå‹•éƒµä»¶åŠŸèƒ½ï¼‰
  - âœ… **æäº¤ç¢ºèªå„ªåŒ–**ï¼ˆé¡¯ç¤ºæ‰€æœ‰æœˆä»½é¸æ“‡çš„å½±ç‰‡ï¼Œè‡ªå‹•å»é‡ï¼‰

å¦‚éœ€å”åŠ©æˆ–ç™¼ç¾æ–‡ä»¶éŒ¯èª¤ï¼Œè«‹èˆ‡ç³»çµ±ç®¡ç†å“¡è¯ç¹«æˆ–æ–¼æ–‡ä»¶ä¸­æ¨™è¨» TODOã€‚

